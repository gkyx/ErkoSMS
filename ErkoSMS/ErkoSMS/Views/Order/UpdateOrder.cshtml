
@model ErkoSMS.ViewModels.OrderViewModel

@{
    var customers = (List<SelectListItem>)ViewBag.Customers;
    var salesState = (List<SelectListItem>)ViewBag.SaleStates;
    var currencies = (List<SelectListItem>)ViewBag.Currencies;
}

    <div>
        <h3>Order Güncelle</h3>
        <hr />
        @using (Html.BeginForm("UpdateOrder", "Order", FormMethod.Post, new { data_erkosms_role = "ajax-form", id = "UpdateOrderForm", style = "width:1200px" }))
        {
            @Html.Hidden("Id", Model.OrderId)
            @Html.AntiForgeryToken()
            @Html.ValidationSummary("", new { @class = "text-danger" })
            <div class="row">
                <div class="form-group col-md-4">
                    <label>Müşteri:</label>
                    @Html.DropDownListFor(x => x.CustomerId, customers, new { id = "customerdropdown", @class = "chosen-select form-control" })
                </div>
                <div class="form-group col-md-4">
                    <label>Kur:</label>
                    @Html.EnumDropDownListFor(x => x.Currency, new { id = "currencydropdown", @class = "chosen-select form-control", style = "width:auto" })
                </div>
                <div class="form-group col-md-4">
                    <label>Durum:</label>
                    @Html.EnumDropDownListFor(x => x.State, new { id = "statedropdown", @class = "chosen-select form-control", style = "width:auto" })
                </div>
            </div>
            <div class="row">
                <div class="form-group col-md-4">
                    @Html.LabelFor(x => x.InvoiceNumber)
                    @Html.TextBoxFor(x => x.InvoiceNumber, new { @class = "chosen-select form-control", Name = "InvoiceNumber", id = "InvoiceTextBox", style = "display:inline-block" })
                </div>
                <div class="form-group col-md-4">
                    @Html.LabelFor(model => model.InvoiceDate)
                    @Html.TextBoxFor(model => model.InvoiceDate, new { Name = "InvoiceDate", @class = "form-control datepicker", placeholder = "Enter Drop-off date here..." })
                </div>
            </div>
            <input type="submit" class="btn btn-primary pull-right" value="Güncelle" />
        }

    </div>

<script>

    $('.datepicker').datepicker({dateFormat: 'dd.mm.yy'}); //Initialise any date pickers
    $('#customerdropdown').select2({ placeholder: "Müşteri Seçin" });
    $('#currencydropdown').select2({ placeholder: "Kur Seçin" });
    $('#statedropdown').select2({ placeholder: "Durum Seçin" });

    $("#EditCustomerForm").on("ajax-form:succeed", function (ev, data) {
        var tg = $(ev.currentTarget);
        closeParentVexModal(tg);
        $("#customerName").val(data.result.Name);
        $("#searchButton").click();
    });

</script>